# DolphinScheduler Workflow Monitor Environment Variables

# DolphinScheduler API Configuration
DS_API_URL=http://dolphinscheuler.master2.com:12345/dolphinscheduler
DS_TOKEN=your_token_here

# DolphinScheduler Host IP Mapping (用于 Docker extra_hosts)
# 如果 DolphinScheduler 在宿主机上，使用宿主机 IP
# 获取宿主机 IP: ip route show default | awk '/default/ {print $3}'
# 或使用: 172.17.0.1 (Docker 默认网关)
DS_HOST_IP=172.17.0.1

# Monitor Configuration
DS_CHECK_INTERVAL=60
DS_CONTINUOUS_MODE=true
DS_AUTO_RECOVERY=true
DS_MAX_RECOVERY_ATTEMPTS=3
DS_TIME_WINDOW_HOURS=24  # 只监控指定小时内启动的工作流
DS_MAX_FAILURES_FOR_RECOVERY=1  # 时间窗口内失败数量阈值，超过只通知不恢复

# Logging
DS_LOG_LEVEL=INFO

# ============================================================================
# Notification Configuration (可选)
# ============================================================================

# 钉钉机器人通知
DS_DINGTALK_ENABLED=false
DS_DINGTALK_WEBHOOK=
DS_DINGTALK_SECRET=

# 企业微信机器人通知
DS_WEWORK_ENABLED=false
DS_WEWORK_WEBHOOK=

# 邮件通知
DS_EMAIL_ENABLED=false
DS_EMAIL_SMTP_HOST=
DS_EMAIL_SMTP_PORT=465
DS_EMAIL_USERNAME=
DS_EMAIL_PASSWORD=
DS_EMAIL_FROM=

# Docker User Permissions (解决日志文件权限问题)
# 设置为当前用户的 UID/GID，运行前执行: id -u 和 id -g 获取
USER_ID=1000
GROUP_ID=1000
